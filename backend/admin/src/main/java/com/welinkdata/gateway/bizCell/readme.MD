# 文档处理管理器

## 文档处理目录结构

### 处理类型

文档处理目录是存放管理处理项。

处理项目类型包括：
  
 + package
        * package 的导入导出
        * package 版本？更新检查
    
+ model

     定义文档的属性字段。支持字符串，日期， 数字，金额等基本类型， 内置记录，列表，数组等类型，
      和引用的记录，列表等类型。

 + service

    定义文档处理的操作。包括输入，输出。可分为

    * flowService： 流服务

    * sysService：  系统代码实现的服务

    * apiService：  外部API 服务

    * dbService     调用数据库服务（CRUD）

 + view

      定义文档显示和处理页面， view 可认为是人工的service， 同样有输入，输出。
      view 有一个标准输出：rtn_status: 返回状态：如确认，取消。
      view 中可包含自身处理的子view，也可引用外部视图。

        * excelView:  excel 视图
        * formView：  表单视图
        * surveyView：问卷调查视图
        * sysView：   系统预制视图

### 目录结构：

系统典型的文档处理管理器的目录结构大致如下:

- sysdoc
    + package1
        * 属性定义
        * 服务定义
        * 模板定义
    + package2
        * 属性定义
        * 服务定义
        * 模板定义 
- mydoc
     + package X
         * 属性定义
         * 服务定义
         * 模板定义 
- tpdoc
     + tp1-code   
        * package y
            * 属性定义
            * 服务定义
            * 模板定义      
    + tp2-code
      * package y
          * 属性定义
          * 服务定义
          * 模板定义


- 目录说明：

    + sysdoc 存放系统预定义的文档处理项  
        
    + mydoc 存放企业自身定义的文档处理项
      
    + tpdoc 存放合作伙伴定义的文档处理项
    
- 基本操作说明

    * 文档处理项的路径： 用"."连接如: sysdoc.baseInfo.org。      

### 文档继承与重载

#### model 的继承

作用：mydoc，tpDoc 都继承sys

+ 可扩展字段
+ 可禁用字段
+ 可修改名称

通过key绑定。

#### service 的重用和重载
model 支持继承后， 原有的service 是可支持重用。
重载

#### view 继承


### 组件化

是否需要考虑组件化的可能性？


## 文档定义

### 共享文档处理

+ 我的共享
    企业维护自身共享文档。 一般企业基础信息： 如组织机构，联系人，银行账户等。
    可设置共享方式： 
            公开，私密，整体部分可见，整体部分不可见（不给谁看）， 按记录设置。
  
    按记录设置包括：
            公开，私密，部分可见，部分不可见。
  
+ 合作伙伴共享
     类似自身分享的文档，合作伙伴分享的文档，我们可以按TP查看，也可按类型查看。
     按类型查看时，可创建（？自动创建？）企业内部的TP文档
  
     - 合作伙伴共享文档--企业内部TP文档

     - TP 基础信息-关联合作伙伴共享文档
    

* 共享文档处理机制
    共享文档类似微信朋友圈。
    系统定时从合作伙伴获取数据。
    查看时，实时刷新。
  
    合作伙伴共享--保存在一个缓存数据中。 
    超过更新时限-丢弃
  
        
### 协同文档
#### 我的协同文档
类型： 接收，发送

+ 发送文档定义
    
+ 接收文档定义
    
+ 合作伙伴设置

+ 处理规则
    （流程图）

#### 合作伙伴协同文档
类型： 接收，发送

+ 发送文档定义

+ 接收文档定义

+ 我的文档

+ 处理规则
  （流程图）

### 群发文档

Project 定义
活动定义

### 应用文档
